[signals]
# Names given to signal samples
#samples: T2tt_850_100, T2tt_500_325
samples: T2tt_200_1, T2tt_200_25, T2tt_225_25, T2tt_225_50, T2tt_250_1, T2tt_250_50, T2tt_250_75, T2tt_275_100, T2tt_275_75, T2tt_400_100, T2tt_400_150, T2tt_400_1, T2tt_400_200, T2tt_400_225, T2tt_400_50, T2tt_425_225, T2tt_425_250, T2tt_450_100, T2tt_450_150, T2tt_450_1, T2tt_450_200, T2tt_450_250, T2tt_450_275, T2tt_450_50, T2tt_475_275, T2tt_475_300, T2tt_500_100, T2tt_500_150, T2tt_500_1, T2tt_500_200, T2tt_500_250, T2tt_500_300, T2tt_500_325, T2tt_500_50, T2tt_525_325, T2tt_525_350, T2tt_550_100, T2tt_550_150, T2tt_550_1, T2tt_550_200, T2tt_550_250, T2tt_550_300, T2tt_550_350, T2tt_550_375, T2tt_550_50, T2tt_600_100, T2tt_600_150, T2tt_600_1, T2tt_600_200, T2tt_600_250, T2tt_600_300, T2tt_600_350, T2tt_600_400, T2tt_600_50, T2tt_650_100, T2tt_650_150, T2tt_650_1, T2tt_650_200, T2tt_650_250, T2tt_650_300, T2tt_650_350, T2tt_650_400, T2tt_650_450, T2tt_650_50, T2tt_700_100, T2tt_700_150, T2tt_700_1, T2tt_700_200, T2tt_700_250, T2tt_700_300, T2tt_700_350, T2tt_700_400, T2tt_700_450, T2tt_700_50, T2tt_750_100, T2tt_750_150, T2tt_750_1, T2tt_750_200, T2tt_750_250, T2tt_750_300, T2tt_750_350, T2tt_750_400, T2tt_750_450, T2tt_750_50, T2tt_800_100, T2tt_800_150, T2tt_800_1, T2tt_800_200, T2tt_800_250, T2tt_800_300, T2tt_800_350, T2tt_800_400, T2tt_800_450, T2tt_800_50, T2tt_850_100, T2tt_850_150, T2tt_850_1, T2tt_850_200, T2tt_850_250, T2tt_850_300, T2tt_850_350, T2tt_850_400, T2tt_850_450, T2tt_850_50, T2tt_900_100, T2tt_900_150, T2tt_900_1, T2tt_900_200, T2tt_900_250, T2tt_900_300, T2tt_900_350, T2tt_900_400, T2tt_900_450, T2tt_900_50, T2tt_950_100, T2tt_950_150, T2tt_950_1, T2tt_950_200, T2tt_950_250, T2tt_950_300, T2tt_950_350, T2tt_950_400, T2tt_950_450, T2tt_950_50

[backgrounds]
# Names given to background samples
samples: ttbarplusw, znunu, ttZ, qcd

[control_regions]
# Names given to each control region for the uncertainties, and the corresponding samples to be used to estimate the yields in that CR
# Until we have data, the data yield will be based on MC (use the same filename for both dataFile and mcFile)
# files should be formated sampleName_crlabel
# Note that the variable names should be the same in the control region trees as in the signal region trees
# to use the baseline selection, leave 'selection' blank
# for external control regions to be applied with a transfer factor, the first argument should be ext
# for control regions to be fit simultaneously with the signal region, the first argument should be fit
# One or two mcFiles can be provided, comma-separated. If a second mcFile is provided, this is treated as a background to be subtracted from the yield obtained from the dataFile
# crName: <ext/fit>; dataFile; mcFiles[; weight; selection]
zfromgamma: ext; data_photoncr     ; gjets_photoncr         ; weight*truePUWeight*btagWeight              ; met>250 && njets>=5 && j1pt>75 && j2pt>75 && nlbjets>=2 && nbjets>=1 && dphij12met>0.5 && dphij3met>0.5
lostlep:    fit; data_onelepcr     ; ttbarplusw_onelepcr    ; weight*truePUWeight*btagWeight*leptnpweight ; nvetolep>0 && mtlepmet<100 && met>250 && j1pt>75 && j2pt>75 && njets>=5 && nlbjets>=2 && nbjets>=1 && dphij12met>0.5 && dphij3met>0.5
qcd:        ext; data_qcdcr        ; qcd_qcdcr,nonqcd_qcdcr ; weight*truePUWeight*btagWeight              ; nvetolep==0 && nvetotau==0 && met>250 && njets>=5 && j1pt>75 && j2pt>75 && nlbjets>=2 && nbjets>=1 && dphij12met<0.15

[bins]
# Specify the binning here, using the appropriate variable names (from your trees)
# The numbers designate the bin edges. A + after the last value means the last bin will include everything greater than the last value
# Thus njets: 0, 1+ will result in the bins {0 <= njets < 1, njets >= 1}
met:     250, 300, 400, 500, 600+
nbjets:  1, 2+
ncttstd: 0, 1+
mtcsv12met: 0, 175+

# Also specify the binning for each set of control regions, both external and simultaneous
[lostlep_bins]
met:     250, 300, 400, 500, 600+
nbjets:  1+
ncttstd: 0, 1+
mtcsv12met: 0, 175+

[zfromgamma_bins]
met:     250, 300, 400, 500, 600+
nbjets:  1+
ncttstd: 0, 1+
mtcsv12met: 0, 175+

[qcd_bins]
met:     250, 300, 400, 500, 600+
nbjets:  1+
ncttstd: 0, 1+
mtcsv12met: 0, 175+

# which bins to combine for the signal and control regions (using the shorthand used for the binmaps)
[combine_bins]
bins: bin_250_1_0_0, bin_250_1_1_0; bin_250_2_0_0, bin_250_2_1_0; bin_300_1_0_0, bin_300_1_1_0; bin_300_2_0_0, bin_300_2_1_0; bin_400_1_0_0, bin_400_1_1_0; bin_400_2_0_0, bin_400_2_1_0; bin_500_1_0_0, bin_500_1_1_0; bin_500_2_0_0, bin_500_2_1_0; bin_600_1_0_0, bin_600_1_1_0; bin_600_2_0_0, bin_600_2_1_0
lostlep_bins: bin_onelepcr_250_1_0_0, bin_onelepcr_250_1_1_0; bin_onelepcr_300_1_0_0, bin_onelepcr_300_1_1_0; bin_onelepcr_400_1_0_0, bin_onelepcr_400_1_1_0; bin_onelepcr_500_1_0_0, bin_onelepcr_500_1_1_0; bin_onelepcr_600_1_0_0, bin_onelepcr_600_1_1_0
zfromgamma_bins: bin_photoncr_250_1_0_0, bin_photoncr_250_1_1_0; bin_photoncr_300_1_0_0, bin_photoncr_300_1_1_0; bin_photoncr_400_1_0_0, bin_photoncr_400_1_1_0; bin_photoncr_500_1_0_0, bin_photoncr_500_1_1_0; bin_photoncr_600_1_0_0, bin_photoncr_600_1_1_0
qcd_bins: bin_qcdcr_250_1_0_0, bin_qcdcr_250_1_1_0; bin_qcdcr_300_1_0_0, bin_qcdcr_300_1_1_0; bin_qcdcr_400_1_0_0, bin_qcdcr_400_1_1_0; bin_qcdcr_500_1_0_0, bin_qcdcr_500_1_1_0; bin_qcdcr_600_1_0_0, bin_qcdcr_600_1_1_0

[config]
# Directory with root files. You must have one for each signal/background specified above! Plus one for data, if havedata is set to Yes
treelocation  = /eos/uscms/store/user/vdutta/13TeV/trees/121815
# Default datacard outputs go under this directory
datacarddir   = Datacards/results
# limit output stuff will go under this directory
limitdir      = Datacards/limits
# subdirectory to use under datacarddir and limitdir
subdir        = test
# Directory with configuration files (CR-> SR bin map, uncertainties, template datacard)
setuplocation = Datacards/setup
# Name of your input TTrees
treename      = Events
# variable to project tree onto (for makeCutflowTables)
projvar       = met
# Name of your weight variable (for the SR)
weightname    = weight*truePUWeight*btagWeight*leptnpweight*lepvetoweight
# Luminosity to scale to (assumes default weights are scaled to 1 /fb)
lumiscale     = 2.14
# Suffix of input root files
filesuffix    = _tree.root
# Datacard template with dummy values to be replaced, to be found in setuplocation
template      = datacard.txt_template
# Do we have data?
havedata      = Yes
# Blind the signal region?
blindsr       = Yes
# Use dummy uncertainty values for signal/background
dummyuncertainties = No
# Print out all the uncertanties
printuncertainties = No
# If overwriting datacard dir, first rename and save existing dir
saveoverwrites = No
# File with names and types of uncertainties to apply, to be found in setuplocation
uncertainty_definitions = define_0l_uncs.conf
# Files specifying uncertainty values by bin start with this string
uncertainty_fileprefix = values_0l_unc
# File speficiying mapping from control regions to signal region
crtosr_bin_map = define_0l_binmap.conf
# method to calculate limits (current options: Asymptotic HybridNew ProfileLikelihood)
limitmethod  = AsymptoticLimits
# Baseline selection in terms of variables in input TTrees. Spaces are fine but don't put in quotes
basesel      = ((nvetolep==0 && nvetotau==0) || (ismc && npromptgentau>0)) && met>250 && j1pt>75 && j2pt>75 && njets>=5 && nlbjets>=2 && nbjets>=1 && dphij12met>0.5 && dphij3met>0.5
